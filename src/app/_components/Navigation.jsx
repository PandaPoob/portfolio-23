import Link from "next/link";
import { useState, useEffect } from "react";

function Navigation() {
  const [oldScrollPosition, setOldScrollPosition] = useState(0);
  const [isScrolling, setIsScrolling] = useState("default");

  useEffect(() => {
    const handleScroll = () => {
      const position = window.scrollY;
      setOldScrollPosition(position);
      if (oldScrollPosition > window.scrollY) {
        setIsScrolling("true");
      } else {
        setIsScrolling("false");
      }
    };
    window.addEventListener("scroll", handleScroll);
    return () => {
      window.removeEventListener("scroll", handleScroll);
    };
  }, [oldScrollPosition]);

  function getTopValue() {
    // hvis vi ruller op eller lige er loaded
    if (isScrolling === "true" || isScrolling === "default") {
      return "0";
    } else if (oldScrollPosition <= 0) {
      return "0";
    } else {
      return "-5.1rem";
    }
  }

  return (
    <nav
      className="bg-light p-3 fixed left-0 right-0 w-screen transition-transform duration-300 transform z-40"
      style={{
        transform: `translateY(${getTopValue()})`,
        ...(isScrolling &&
          oldScrollPosition !== 0 && {
            boxShadow: "2px 2px 4px 1px rgba(32, 16, 54, 0.20)",
          }),
      }}
    >
      <div className="flex justify-between items-center text-dark">
        <div>
          <Link href="/" className="group">
            <svg
              width="54"
              height="54"
              viewBox="0 0 54 54"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <rect
                x="1"
                y="1"
                width="52"
                height="52"
                rx="3"
                fill="#F2F1FF"
                className="group-hover:fill-dark"
              />
              <path
                d="M31.9763 26.2692C31.8901 27.1939 31.8255 28.0864 31.7827 28.9465C31.761 29.8066 31.7505 30.4626 31.7505 30.9142C31.7505 31.4089 31.761 31.871 31.7827 32.3012C31.8041 32.7314 31.8255 33.1076 31.8472 33.4302H31.1053C30.8687 31.8174 30.5461 30.5485 30.1376 29.6239C29.7289 28.6777 29.1805 28.0111 28.4925 27.624C27.8043 27.2154 26.8904 27.0111 25.7507 27.0111H24.3636C23.7185 27.0111 23.2239 27.0649 22.8798 27.1724C22.5357 27.2799 22.2992 27.5057 22.1702 27.8498C22.0626 28.1939 22.0089 28.7207 22.0089 29.4304V45.5587C22.0089 46.376 22.0949 46.9889 22.2669 47.3974C22.439 47.8058 22.7723 48.0747 23.2669 48.2038C23.7615 48.3328 24.4711 48.4082 25.3958 48.4296V49.107C24.7722 49.0639 23.9658 49.0424 22.9766 49.0424C21.9874 49.021 20.9659 49.0102 19.9122 49.0102C19.009 49.0102 18.1381 49.021 17.2994 49.0424C16.4607 49.0424 15.7296 49.0639 15.106 49.107V48.4618C15.8156 48.4187 16.3424 48.3328 16.6865 48.2038C17.0521 48.0747 17.2887 47.8167 17.3962 47.4296C17.5252 47.0425 17.5897 46.4619 17.5897 45.6877V29.6884C17.5897 28.8929 17.5252 28.3122 17.3962 27.9466C17.2887 27.5595 17.0521 27.3014 16.6865 27.1724C16.3424 27.0219 15.8156 26.9358 15.106 26.9144V26.2692C15.9661 26.2907 16.8693 26.3122 17.8155 26.3337C18.7832 26.3337 19.7294 26.3445 20.6541 26.366C21.6003 26.366 22.4712 26.366 23.2669 26.366C24.0841 26.366 24.7399 26.366 25.2346 26.366C26.2238 26.366 27.342 26.366 28.5893 26.366C29.8579 26.3445 30.9869 26.3122 31.9763 26.2692ZM27.1054 37.4946C27.1054 37.4946 27.1054 37.6022 27.1054 37.8171C27.1054 38.0321 27.1054 38.1397 27.1054 38.1397H21.0412C21.0412 38.1397 21.0412 38.0321 21.0412 37.8171C21.0412 37.6022 21.0412 37.4946 21.0412 37.4946H27.1054ZM27.8473 33.2367C27.7613 34.4624 27.7183 35.3979 27.7183 36.043C27.7398 36.6881 27.7506 37.2796 27.7506 37.8171C27.7506 38.3546 27.7613 38.9461 27.7828 39.5912C27.8043 40.2364 27.8581 41.1718 27.9441 42.3976H27.2022C27.1162 41.6665 26.9549 40.9783 26.7184 40.3331C26.4818 39.6666 26.1163 39.1396 25.6216 38.7526C25.1485 38.3441 24.4604 38.1397 23.5572 38.1397V37.4946C24.2238 37.4946 24.7722 37.3547 25.2023 37.0752C25.6324 36.7957 25.9657 36.4409 26.2023 36.0107C26.4603 35.5591 26.6539 35.0967 26.7829 34.6237C26.9334 34.129 27.0409 33.6668 27.1054 33.2367H27.8473ZM41.6519 25.8821C42.8562 25.8821 43.7808 26.0112 44.426 26.2692C45.0711 26.5273 45.6303 26.8068 46.1033 27.1079C46.3614 27.2584 46.5657 27.3767 46.7162 27.4627C46.8883 27.5272 47.0496 27.5595 47.2 27.5595C47.4153 27.5595 47.5657 27.4412 47.6516 27.2047C47.7592 26.9681 47.8452 26.6133 47.9097 26.1402H48.6516C48.6302 26.5488 48.5979 27.0219 48.5548 27.5595C48.5334 28.0971 48.512 28.8175 48.4903 29.7207C48.4903 30.6025 48.4903 31.7743 48.4903 33.2367H47.7484C47.6839 32.1399 47.4367 31.0863 47.0065 30.0755C46.598 29.0647 46.0065 28.2369 45.2324 27.5917C44.4799 26.9251 43.5122 26.5918 42.3293 26.5918C41.2756 26.5918 40.3939 26.9036 39.6842 27.5272C38.9963 28.1509 38.652 28.9896 38.652 30.0433C38.652 30.9464 38.8778 31.7098 39.3294 32.3335C39.781 32.9355 40.4156 33.527 41.2325 34.1076C42.0712 34.6668 43.0606 35.3119 44.2002 36.043C45.2541 36.7312 46.2001 37.4192 47.0387 38.1074C47.8774 38.774 48.5334 39.5159 49.0064 40.3331C49.5011 41.1504 49.7483 42.1504 49.7483 43.333C49.7483 44.7309 49.4043 45.8921 48.7161 46.8167C48.0281 47.7413 47.1033 48.4296 45.942 48.8812C44.7808 49.3328 43.5122 49.5585 42.1357 49.5585C40.8671 49.5585 39.8563 49.4295 39.1036 49.1715C38.3725 48.9134 37.7383 48.6445 37.2005 48.3651C36.7275 48.0639 36.3618 47.9135 36.1037 47.9135C35.8888 47.9135 35.7275 48.0316 35.6199 48.2683C35.534 48.5049 35.4586 48.8597 35.3941 49.3328H34.6522C34.6953 48.8381 34.7167 48.2574 34.7167 47.5909C34.7384 46.9243 34.7489 46.064 34.7489 45.0104C34.7706 43.935 34.7812 42.5803 34.7812 40.946H35.5231C35.6093 42.3222 35.8457 43.6125 36.2328 44.8168C36.6415 45.9995 37.2544 46.9566 38.0714 47.6877C38.9101 48.4187 40.0176 48.7844 41.3938 48.7844C42.1466 48.7844 42.824 48.6554 43.426 48.3973C44.0497 48.1178 44.5444 47.6985 44.9098 47.1393C45.2755 46.5587 45.4582 45.8276 45.4582 44.9458C45.4582 44.0641 45.2541 43.2899 44.8453 42.6234C44.4368 41.9568 43.867 41.3331 43.1357 40.7525C42.4046 40.1719 41.5445 39.5804 40.5552 38.9784C39.5446 38.3332 38.5983 37.6772 37.7166 37.0107C36.8351 36.3442 36.1254 35.5914 35.5876 34.7527C35.0715 33.8926 34.8135 32.8604 34.8135 31.6561C34.8135 30.3227 35.136 29.2368 35.7812 28.3982C36.4263 27.538 37.265 26.9036 38.2972 26.495C39.3511 26.0864 40.4692 25.8821 41.6519 25.8821Z"
                fill="#201036"
                className="group-hover:fill-white"
              />
              <path d="M1 4.3369L1 49.6631" stroke="#201036" />
              <path d="M53 4.3369L53 49.6631" stroke="#201036" />
              <path d="M4.33691 53L49.6631 53" stroke="#201036" />
              <path d="M4.33691 1L49.6631 1" stroke="#201036" />
            </svg>
          </Link>
        </div>
        <div>
          <ul className="grid grid-cols-3 gap-5 md:gap-12 text-body font-normal">
            <li>
              <Link href="/#about" className="hover:font-semibold">
                about
              </Link>
            </li>
            <li className="min-w-[60px]">
              <Link href="/#projects" className="hover:font-semibold">
                projects
              </Link>
            </li>
            <li>
              <Link href="/#contact" className="hover:font-semibold">
                contact
              </Link>
            </li>
          </ul>
        </div>
      </div>
    </nav>
  );
}

export default Navigation;
